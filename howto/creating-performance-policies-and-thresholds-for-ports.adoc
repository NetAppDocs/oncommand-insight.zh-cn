---
permalink: howto/creating-performance-policies-and-thresholds-for-ports.html 
sidebar: sidebar 
keywords:  
summary: 您可以为与端口关联的指标创建具有阈值的性能策略。默认情况下，性能策略会在创建时应用于指定类型的所有设备。您可以创建一个标注，以便在性能策略中仅包含一个特定设备或一组设备。为简单起见、此操作步骤 中不使用标注。 
---
= 为端口创建性能策略和阈值
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以为与端口关联的指标创建具有阈值的性能策略。默认情况下，性能策略会在创建时应用于指定类型的所有设备。您可以创建一个标注，以便在性能策略中仅包含一个特定设备或一组设备。为简单起见、此操作步骤 中不使用标注。



== 开始之前

如果要在此性能策略中使用标注、则必须在创建性能策略之前创建标注。



== 步骤

. 从Insight工具栏中、单击*管理*>*性能策略*
+
此时将显示现有策略。如果交换机端口存在策略、则可以编辑现有策略、添加新策略和阈值。

. 编辑现有端口策略或创建新端口策略
+
** 单击现有策略最右侧的铅笔图标。添加步骤`D`和`e`中所述的阈值。
** 单击*+添加*以添加新策略
+
... 添加"`Policy Name`"：Slow Drain Device
... 选择端口作为对象类型
... 为的"`Apply after window`"输入First occurrence
... 输入阈值：BB credit zero - Rx > 1、000、000
... 输入阈值：BB credit zero - Tx > 1、000、000
... 单击`S生成警报时顶部处理其他策略`
... 单击"`Save`"




+
您创建的策略会监控您在24小时内设置的阈值。如果超过阈值、则会报告违规。

. 单击*信息板*>*违规信息板*
+
系统将显示系统上发生的所有违规。搜索违规或对违规进行排序以查看"`S低耗电设备`"违规。违规信息板显示出现BB信用0错误且超过性能策略中设置的阈值的所有端口。违规信息板中标识的每个交换机端口都是一个突出显示的端口登录页面链接。

. 单击突出显示的端口链接以显示端口登录页面。
+
此时将显示端口登录页面、其中包含对BB信用0故障排除有用的信息：

+
** 端口所连接的设备
** 报告违规的端口的标识、即光纤通道交换机端口。
** 端口的速度
** 关联的节点和端口名称image:../media/port-landing-page.gif[""]


. 向下滚动以查看端口指标。单击*选择指标以显示*>* BB信用零*以显示BB信用图。
+
image::../media/expert-port-metrics.gif[专家端口指标]

. 单击*顶部相关*
+
最高相关资源分析显示了端口作为与性能最相关的资源提供服务的已连接控制器节点。此步骤会将端口活动的IOPS指标与整体节点活动进行比较。此时将显示Tx和Rx BB信用零指标以及控制器节点的IOPS。此时将显示以下内容：

+
** 控制器IOS与端口流量高度相关
** 如果端口向服务器传输IO、则违反性能策略。
** 由于我们的端口性能违规与存储控制器上的高IOPS负载同时发生、因此违规很可能是由于存储节点上的工作负载造成的。image:../media/port-node-compare.gif[""]


. 返回端口登录页面并访问存储控制器节点的登录页面以分析工作负载指标。
+
节点显示利用率违规、指标显示与缓冲区到缓冲区零信用状态相关的高"缓存读取已替换"。

+
image::../media/node-landing-page.gif[节点登录页面]

. 在节点登录页面中、您可以通过从相关资源列表中选择端口来比较BB信用零、然后从指标菜单中选择节点的利用率数据、包括缓存利用率数据。
+
image::../media/node-port-comparison.gif[节点端口比较]

+
这些数据清楚地表明、缓存命中率与我们的其他指标反向相关。此存储节点不能通过缓存响应服务器负载、而是出现高缓存读取率被替换的情况。由于必须从磁盘而不是缓存中检索大部分数据、可能会导致端口向服务器传输数据的延迟。性能问题的发生原因 可能是工作负载导致IO行为发生变化、并且节点缓存及其配置为发生原因。可以通过增加节点的缓存大小或更改缓存算法的行为来解决此问题。


